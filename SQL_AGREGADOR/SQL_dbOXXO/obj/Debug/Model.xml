<?xml version="1.0" encoding="utf-8"?>
<DataSchemaModel FileFormatVersion="1.2" SchemaVersion="2.9" DspName="Microsoft.Data.Tools.Schema.Sql.Sql140DatabaseSchemaProvider" CollationLcid="1033" CollationCaseSensitive="False" xmlns="http://schemas.microsoft.com/sqlserver/dac/Serialization/2012/02">
	<Header>
		<CustomData Category="AnsiNulls">
			<Metadata Name="AnsiNulls" Value="False" />
		</CustomData>
		<CustomData Category="QuotedIdentifier">
			<Metadata Name="QuotedIdentifier" Value="False" />
		</CustomData>
		<CustomData Category="CompatibilityMode">
			<Metadata Name="CompatibilityMode" Value="150" />
		</CustomData>
		<CustomData Category="Reference" Type="Assembly">
			<Metadata Name="LogicalName" Value="SQL_dbOXXO.dll" />
			<Metadata Name="FileName" Value="C:\USERS\IVAN\DESKTOP\SQL_DBOXXO\SQL_AGREGADOR\SQL_DBOXXO\OBJ\DEBUG\SQL_DBOXXO.DLL" />
			<Metadata Name="AssemblyName" Value="SQL_dbOXXO" />
			<Metadata Name="PermissionSet" Value="SAFE" />
			<Metadata Name="Owner" Value="" />
			<Metadata Name="GenerateSqlClrDdl" Value="True" />
			<Metadata Name="IsVisible" Value="True" />
			<Metadata Name="IsModelAware" Value="True" />
			<Metadata Name="SkipCreationIfEmpty" Value="True" />
			<Metadata Name="AssemblySymbolsName" Value="C:\Users\Ivan\Desktop\SQL_dbOXXO\SQL_AGREGADOR\SQL_dbOXXO\obj\Debug\SQL_dbOXXO.pdb" />
		</CustomData>
		<CustomData Category="SqlCmdVariables" Type="SqlCmdVariable" />
	</Header>
	<Model>
		<Element Type="SqlDatabaseOptions">
			<Property Name="Collation" Value="SQL_Latin1_General_CP1_CI_AS" />
			<Property Name="IsAnsiPaddingOn" Value="False" />
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="IsCursorDefaultScopeGlobal" Value="True" />
			<Property Name="IsTornPageProtectionOn" Value="False" />
			<Property Name="IsFullTextEnabled" Value="True" />
			<Property Name="CompatibilityMode" Value="150" />
			<Property Name="DefaultLanguage" Value="" />
			<Property Name="DefaultFullTextLanguage" Value="" />
			<Property Name="TargetRecoveryTimePeriod" Value="60" />
			<Property Name="QueryStoreCaptureMode" Value="2" />
			<Property Name="QueryStoreMaxStorageSize" Value="1000" />
			<Relationship Name="DefaultFilegroup">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[PRIMARY]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[swt].[fnFormatoJsonCargo].[IdRegistro]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="3" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[fnFormatoJsonConsulta].[IdRegistro]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[fnFormatoJsonConsulta]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="4" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[fnFormatoJson].[IdRegistro]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[fnFormatoJson]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="5" />
		</Element>
		<Element Type="SqlSchema" Name="[agr]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[agr].[CLIENTE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CLIENTE].[sntIdCliente]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CLIENTE].[varGUIDCliente]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="46" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="6" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CLIENTE].[varDescrip]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CLIENTE].[bitIsRegulada]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CLIENTE].[sdtFecAlta]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="7" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CLIENTE].[URLAPI]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="400" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CLIENTE].[UserAPI]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CLIENTE].[PassAPI]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CLIENTE].[bitIsActivo]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="8" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CLIENTE].[NuevoCampo]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="9" />
		</Element>
		<Element Type="SqlIndex" Name="[agr].[CLIENTE].[IX_NC_varGUIDCliente_X1]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[CLIENTE].[varGUIDCliente]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[agr].[CLIENTE].[sntIdCliente]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CLIENTE].[varDescrip]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CLIENTE].[bitIsRegulada]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CLIENTE].[sdtFecAlta]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CLIENTE].[bitIsActivo]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[agr].[CLIENTE]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[agr].[CONFIG_CLIENTE]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFIG_CLIENTE].[intIdRegistro]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFIG_CLIENTE].[sntIdCliente]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFIG_CLIENTE].[sntIdConfiguracion]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFIG_CLIENTE].[varValor]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFIG_CLIENTE].[varMsgError]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="60" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="10" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="11" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="12" />
		</Element>
		<Element Type="SqlTable" Name="[agr].[CONFIG_COL_ESTABLECIMIENTO]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[intIdConColEstable]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[intIdConNivEstable]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[sntIdEstablecimiento]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[tnyOrden]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[varColumna]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="25" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[varTipoDato]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[varValor]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="13" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="14" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="15" />
		</Element>
		<Element Type="SqlIndex" Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[IX_sntIdEstablecimiento_X1]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[sntIdEstablecimiento]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[intIdConColEstable]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[intIdConNivEstable]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[tnyOrden]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[varColumna]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[varTipoDato]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO].[intIdConNivEstable]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO].[sntIdEstablecimiento]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO].[tnyNivel]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO].[Descrip]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="16" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="17" />
		</Element>
		<Element Type="SqlIndex" Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO].[IX_sntIdEstablecimiento_X1]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO].[sntIdEstablecimiento]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO].[intIdConNivEstable]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO].[tnyNivel]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO].[Descrip]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[agr].[CONFIGURACION]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFIGURACION].[sntIdConfiguracion]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFIGURACION].[varDescrip]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="60" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="18" />
		</Element>
		<Element Type="SqlTable" Name="[agr].[CONFVALIDACIONES]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFVALIDACIONES].[numIdConfValidacion]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="3" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFVALIDACIONES].[sntIdCliente]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFVALIDACIONES].[numIdValidacion]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="3" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFVALIDACIONES].[tnyIdNivel]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFVALIDACIONES].[varScriptSQL]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[CONFVALIDACIONES].[bitIsActivo]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="19" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="20" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="21" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="22" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="23" />
		</Element>
		<Element Type="SqlIndex" Name="[agr].[CONFVALIDACIONES].[IX_NC_COMB_X1]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[CONFVALIDACIONES].[tnyIdNivel]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[CONFVALIDACIONES].[bitIsActivo]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[agr].[CONFVALIDACIONES].[numIdConfValidacion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFVALIDACIONES].[sntIdCliente]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFVALIDACIONES].[numIdValidacion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFVALIDACIONES].[varScriptSQL]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[agr].[CONFVALIDACIONES]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[agr].[DF_bitIsActivo_CLI]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[CLIENTE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[agr].[CLIENTE].[bitIsActivo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="8" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[agr].[DF_bitIsActivo_CVA]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[CONFVALIDACIONES]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[agr].[CONFVALIDACIONES].[bitIsActivo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="19" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[agr].[DF_dttFecAlta_CLI]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[CLIENTE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[agr].[CLIENTE].[sdtFecAlta]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="7" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[agr].[DF_FecRegistro_PRE]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[PROCESSERROR]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[agr].[PROCESSERROR].[FecRegistro]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="24" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[agr].[DF_FecRegistro_REF]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[agr].[REFERENCIA].[sdtFecRegistro]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="25" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[agr].[DF_GUIDCliente_CLI]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(newid())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[CLIENTE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[agr].[CLIENTE].[varGUIDCliente]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="6" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[agr].[DF_sdtFecRegistro_PRO]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[PROCESSCONTROL]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[agr].[PROCESSCONTROL].[sdtFecRegistro]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="26" />
		</Element>
		<Element Type="SqlTable" Name="[agr].[ESTABLECIMIENTO]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[ESTABLECIMIENTO].[sntIdEstablecimiento]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[ESTABLECIMIENTO].[varCodEstablecimiento]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="12" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[ESTABLECIMIENTO].[varDescrip]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[ESTABLECIMIENTO].[intNoSocio]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="27" />
		</Element>
		<Element Type="SqlIndex" Name="[agr].[ESTABLECIMIENTO].[IX_NC_varCodEstablecimiento_X1]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[ESTABLECIMIENTO].[varCodEstablecimiento]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[agr].[ESTABLECIMIENTO].[sntIdEstablecimiento]" />
				</Entry>
				<Entry>
					<References Name="[agr].[ESTABLECIMIENTO].[varDescrip]" />
				</Entry>
				<Entry>
					<References Name="[agr].[ESTABLECIMIENTO].[intNoSocio]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[agr].[ESTABLECIMIENTO]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[agr].[ESTATUS]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[ESTATUS].[tnyIdEstatus]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[ESTATUS].[varDescrip]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="46" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="28" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[agr].[FK_chrIdMoneda_REF]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[agr].[REFERENCIA].[chrIdMoneda]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[agr].[MONEDA].[chrIdMoneda]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[agr].[MONEDA]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="29" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[agr].[FK_intIdConNivEstable_CCE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[intIdConNivEstable]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO].[intIdConNivEstable]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="14" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[agr].[FK_intIdProcessControl_PRE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[agr].[PROCESSERROR].[intIdProcessControl]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[PROCESSERROR]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[agr].[PROCESSCONTROL].[intIdProcessControl]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[agr].[PROCESSCONTROL]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="30" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[agr].[FK_intIdProcessControl_REF]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[agr].[REFERENCIA].[intIdProcessControl]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[agr].[PROCESSCONTROL].[intIdProcessControl]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[agr].[PROCESSCONTROL]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="31" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[agr].[FK_numIdValidacion_CVA]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[agr].[CONFVALIDACIONES].[numIdValidacion]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[CONFVALIDACIONES]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[agr].[VALIDACION].[numIdValidacion]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[agr].[VALIDACION]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="21" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[agr].[FK_numIdValidacion_PRE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[agr].[PROCESSERROR].[numIdValidacion]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[PROCESSERROR]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[agr].[VALIDACION].[numIdValidacion]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[agr].[VALIDACION]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="32" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[agr].[FK_sntIdCliente_COC]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[agr].[CONFIG_CLIENTE].[sntIdCliente]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[CONFIG_CLIENTE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[agr].[CLIENTE].[sntIdCliente]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[agr].[CLIENTE]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="11" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[agr].[FK_sntIdCliente_CVA]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[agr].[CONFVALIDACIONES].[sntIdCliente]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[CONFVALIDACIONES]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[agr].[CLIENTE].[sntIdCliente]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[agr].[CLIENTE]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="22" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[agr].[FK_sntIdCliente_REF]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[agr].[REFERENCIA].[sntIdCliente]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[agr].[CLIENTE].[sntIdCliente]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[agr].[CLIENTE]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="33" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[agr].[FK_sntIdConfiguracion_COC]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[agr].[CONFIG_CLIENTE].[sntIdConfiguracion]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[CONFIG_CLIENTE]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[agr].[CONFIGURACION].[sntIdConfiguracion]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[agr].[CONFIGURACION]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="12" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[agr].[FK_sntIdEstablecimiento_CCE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[sntIdEstablecimiento]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[agr].[ESTABLECIMIENTO].[sntIdEstablecimiento]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[agr].[ESTABLECIMIENTO]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="15" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[agr].[FK_sntIdEstablecimiento_CNE]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO].[sntIdEstablecimiento]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[agr].[ESTABLECIMIENTO].[sntIdEstablecimiento]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[agr].[ESTABLECIMIENTO]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="17" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[agr].[FK_sntIdEstablecimiento_REF]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[agr].[REFERENCIA].[sntIdEstablecimiento]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[agr].[ESTABLECIMIENTO].[sntIdEstablecimiento]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[agr].[ESTABLECIMIENTO]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="34" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[agr].[FK_tnyIdEstatus_REF]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[agr].[REFERENCIA].[tnyIdEstatus]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[agr].[ESTATUS].[tnyIdEstatus]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[agr].[ESTATUS]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="35" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[agr].[FK_tnyIdNivel_CVA]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[agr].[CONFVALIDACIONES].[tnyIdNivel]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[CONFVALIDACIONES]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[agr].[NIVEL].[tnyIdNivel]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[agr].[NIVEL]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="23" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[agr].[FK_tnyIdOrigen_PRO]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[agr].[PROCESSCONTROL].[tnyIdOrigen]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[PROCESSCONTROL]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[agr].[ORIGEN].[tnyIdOrigen]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[agr].[ORIGEN]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="36" />
		</Element>
		<Element Type="SqlScalarFunction" Name="[agr].[fnCodValidacion]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[smallint]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[smallint]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[smallint]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[smallint]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnCodValidacion].[@vcReference]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
 BEGIN

	DECLARE @iNumber SMALLINT = 0, 
			@vcNumber CHAR(1) = '', 
			@iCont SMALLINT, 
			@iSum SMALLINT = 0, 
			@iChecker SMALLINT

	SET @iCont = LEN(@vcReference)

	WHILE 0 = 0
	BEGIN
		SET @iCont = @iCont - 1

		SET @vcNumber = RIGHT(@vcReference,1)

		SET @iNumber = @vcNumber

		IF @vcNumber = ''
		BEGIN
			BREAK
		END

		IF (@iCont % 2) = 0
		BEGIN
			SET @iNumber = @iNumber * 2

			IF @iNumber > 9
			BEGIN
				SET @iNumber = @iNumber - 9
			END

		END

		SET @iSum = @iSum + @iNumber

		SET @vcReference = LEFT(@vcReference,@iCont)
			
	END

	SET @iChecker = (10 - (@iSum % 10))

	IF @iChecker = 10
	BEGIN
		SET @iChecker = 0
	END

	RETURN @iChecker

 END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="3" />
							<Property Name="Length" Value="810" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="&#xD;&#xA; CREATE FUNCTION agr.fnCodValidacion&#xD;&#xA; (@vcReference VARCHAR(16))&#xD;&#xA; RETURNS CHAR(1)&#xD;&#xA; AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[agr].[fnCodValidacion].[@vcReference]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="Length" Value="1" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[char]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[agr].[fnCompCeroDifRef]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[numeric]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[agr].[LVAL]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[agr].[LVAL].[varValor]" />
				</Entry>
				<Entry>
					<References Name="[agr].[LVAL].[numIdLval]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnCompCeroDifRef].[@P_NumDifReferencia]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
BEGIN

	DECLARE @V_Longitud INT,
			@V_DifNume NUMERIC,
			@V_Cant INT = 1,
			@V_Dif INT,
			@V_Cadena VARCHAR(10) = ''


	SET @V_Longitud = (SELECT CONVERT(INT,varValor) FROM agr.LVAL WHERE numIdLval = 16)
	
	 SET @V_Dif = (@V_Longitud - len(@P_NumDifReferencia))

	 WHILE @V_Cant <= @V_Dif
	 BEGIN

		SET @V_Cadena = @V_Cadena + '0'

		SET @V_Cant += 1

	 END

	RETURN @V_Cadena


END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="510" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION agr.fnCompCeroDifRef&#xD;&#xA;(@P_NumDifReferencia NUMERIC(20))&#xD;&#xA;RETURNS VARCHAR(12)&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[agr].[fnCompCeroDifRef].[@P_NumDifReferencia]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="Length" Value="12" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[varchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlMultiStatementTableValuedFunction" Name="[agr].[fnFormatoJson]">
			<Property Name="ReturnTableVariable" Value="@tbl_Json" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSCONTROL]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSCONTROL].[nvarJSON]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSCONTROL].[intIdProcessControl]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson].[@P_IdRegistro]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson].[ExpiryDate]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson].[CurrencyCode]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson].[Amount]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson].[TransactionId]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson].[GUIDClient]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson].[BeneficiaryId]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson].[EstablecimientoId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[fnFormatoJson].[IdRegistro]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="5" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[fnFormatoJson].[ExpiryDate]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[fnFormatoJson].[CurrencyCode]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="4" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[fnFormatoJson].[Amount]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[fnFormatoJson].[TransactionId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[fnFormatoJson].[GUIDClient]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="46" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[fnFormatoJson].[BeneficiaryId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="26" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[fnFormatoJson].[EstablecimientoId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
 BEGIN
	
	DECLARE @json NVARCHAR(MAX)
	
	SET @json = (SELECT nvarJSON FROM agr.PROCESSCONTROL WITH(NOLOCK) WHERE intIdProcessControl = @P_IdRegistro)

	INSERT INTO @tbl_Json (ExpiryDate, CurrencyCode, Amount, TransactionId, GUIDClient, BeneficiaryId, EstablecimientoId)
	SELECT IIF(TRY_CAST(ExpiryDate AS SMALLDATETIME) IS NULL, ExpiryDate, IIF (CONVERT(SMALLDATETIME,ExpiryDate) = '1900-01-01 00:00:00', NULL,ExpiryDate)) AS ExpiryDate,
		   CurrencyCode, 
		   Amount, 
		   TransactionId, 
		   GUIDClient, 
		   BeneficiaryId, 
		   EstablecimientoId
	FROM OPENJSON(@json)
	WITH(ExpiryDate VARCHAR(20) 'strict $.ExpiryDate',
	     CurrencyCode VARCHAR(4) 'strict $.CurrencyCode',
		 Amount DECIMAL(8,2) 'strict $.Amount',
		 TransactionId NUMERIC(32) 'strict $.TransactionId',
		 GUIDClient VARCHAR(46) 'strict $.GUIDClient',
		 BeneficiaryId VARCHAR(26) 'strict $.BeneficiaryId',
		 EstablecimientoId SMALLINT 'strict $.EstablecimientoId')
	
	RETURN

 END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="3" />
							<Property Name="Length" Value="1346" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="&#xD;&#xA; CREATE FUNCTION agr.fnFormatoJson&#xD;&#xA; (@P_IdRegistro INT)&#xD;&#xA; RETURNS @tbl_Json TABLE (IdRegistro INT PRIMARY KEY IDENTITY(1,1), ExpiryDate VARCHAR(20), CurrencyCode VARCHAR(4), Amount DECIMAL(8,2), TransactionId NUMERIC(32), GUIDClient VARCHAR(46), BeneficiaryId VARCHAR(26), EstablecimientoId SMALLINT,&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;  INDEX IX_NC_X1 NONCLUSTERED (GUIDClient))&#xD;&#xA; AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[agr].[fnFormatoJson].[@P_IdRegistro]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineIndexAnnotation" Disambiguator="37" />
		</Element>
		<Element Type="SqlIndex" Name="[agr].[fnFormatoJson].[IX_NC_X1]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[fnFormatoJson].[GUIDClient]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[agr].[fnFormatoJson]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="37" />
		</Element>
		<Element Type="SqlMultiStatementTableValuedFunction" Name="[agr].[fnFormatoJsonConsulta]">
			<Property Name="ReturnTableVariable" Value="@tbl_Json" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSCONTROL]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSCONTROL].[nvarJSON]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSCONTROL].[intIdProcessControl]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJsonConsulta].[@P_IdRegistro]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJsonConsulta].[IdReferencia]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[fnFormatoJsonConsulta].[IdRegistro]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="4" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[fnFormatoJsonConsulta].[IdReferencia]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="15" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
BEGIN

	DECLARE @json NVARCHAR(MAX)

	SET @json = (SELECT nvarJSON FROM agr.PROCESSCONTROL WITH(NOLOCK) WHERE intIdProcessControl = @P_IdRegistro)
	
	INSERT INTO @tbl_Json (IdReferencia)
	SELECT *
	FROM OPENJSON(@json)
	WITH(ReferenceId NUMERIC(15) 'strict $.ReferenceId')

	RETURN
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="2" />
							<Property Name="Length" Value="465" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE FUNCTION [agr].[fnFormatoJsonConsulta]&#xD;&#xA;(@P_IdRegistro INT)&#xD;&#xA;RETURNS @tbl_Json TABLE (IdRegistro INT PRIMARY KEY IDENTITY(1,1), IdReferencia NUMERIC(15))&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[agr].[fnFormatoJsonConsulta].[@P_IdRegistro]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[agr].[fnGeneraDifReferencia]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[numeric]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnGeneraDifReferencia].[@P_RAND]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnCompCeroDifRef]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnGeneraDifReferencia].[@tbl_DifReferencia].[DifReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numDifReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numDifReferencia]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[agr].[fnGeneraDifReferencia].[@tbl_DifReferencia]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[fnGeneraDifReferencia].[@tbl_DifReferencia].[IdRegistro]">
									<Property Name="IsNullable" Value="False" />
									<Property Name="IsIdentity" Value="True" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[fnGeneraDifReferencia].[@tbl_DifReferencia].[DifReferencia]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="15" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[numeric]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
BEGIN
	DECLARE @V_DifReferencia NUMERIC(20),
		@V_Cont INT = 1	

	DECLARE @tbl_DifReferencia AS TABLE (IdRegistro INT PRIMARY KEY IDENTITY(1,1), DifReferencia NUMERIC(15))
	DECLARE @V_Cadena VARCHAR(10),
			@V_Valido BIT = 0

		WHILE @V_Valido <> 1
		BEGIN
			
			SET @V_DifReferencia = (@P_RAND * 1000000000000000)

			SET @V_Cadena = (SELECT agr.fnCompCeroDifRef (@V_DifReferencia))
		
			SET @V_DifReferencia = CONCAT(@V_DifReferencia, @V_Cadena)

			INSERT INTO @tbl_DifReferencia (DifReferencia)
			SELECT numDifReferencia
			FROM agr.REFERENCIA

			SET @V_Valido = (SELECT CASE 
									   WHEN COUNT(*) > 0 THEN 0 
									   ELSE 1
									END
							 FROM agr.REFERENCIA
							 WHERE numDifReferencia = @V_DifReferencia)


		END
	
		RETURN @V_DifReferencia

END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="896" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [agr].[fnGeneraDifReferencia]&#xD;&#xA;(@P_RAND FLOAT)&#xD;&#xA;RETURNS NUMERIC(20)&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[agr].[fnGeneraDifReferencia].[@P_RAND]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="Precision" Value="20" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[numeric]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[agr].[fnGeneraJson]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[smallint]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[smallint]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sntIdEstablecimiento]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numIdReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnGeneraJson].[@P_IdReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnGeneraJson].[@P_Opcion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnGeneraJson].[@tbl_Ordeado].[String]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[varColumna]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[varTipoDato]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[varValor]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[sntIdEstablecimiento]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[intIdConNivEstable]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[tnyOrden]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnGeneraJson].[@tbl_Ordeado].[String]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO].[tnyNivel]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO].[sntIdEstablecimiento]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO].[Descrip]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO].[intIdConNivEstable]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO].[sntIdEstablecimiento]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO].[tnyNivel]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[agr].[fnGeneraJson].[@tbl_Ordeado]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[fnGeneraJson].[@tbl_Ordeado].[IdRegistro]">
									<Property Name="IsNullable" Value="False" />
									<Property Name="IsIdentity" Value="True" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[fnGeneraJson].[@tbl_Ordeado].[String]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="200" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
 BEGIN
	
	DECLARE @tbl_Ordeado AS TABLE (IdRegistro INT PRIMARY KEY IDENTITY(1,1), String VARCHAR(200))
	DECLARE @V_IdEstablecimiento smallint,
			@V_SQL NVARCHAR(MAX), 
			@V_Col VARCHAR(MAX), 
			@V_Cont INT = 1, 
			@V_Lim INT = 1,
			@V_IdNivel SMALLINT
		
	--1 - CREACIN DE TABLA
	--2 - CREACIN INSERT
	--3 - SELECT - INSERT
	--4 - SELECT RESULTADO

	SET @V_IdEstablecimiento = (SELECT sntIdEstablecimiento	FROM agr.REFERENCIA WHERE numIdReferencia = @P_IdReferencia)

	SET @V_SQL = CASE	
					 WHEN @P_Opcion = 1 THEN 'DECLARE @V_Json NVARCHAR(MAX)  CREATE TABLE #Formato (' 
					 WHEN @P_Opcion = 2 THEN 'INSERT INTO #Formato ('
					 WHEN @P_Opcion = 3 THEN 'SELECT '
					 WHEN @P_Opcion = 4 THEN 'SET @V_Json = (SELECT '
				 END

	INSERT INTO @tbl_Ordeado (String)
	SELECT CASE
			   WHEN @P_Opcion = 1 THEN ('[' + varColumna + '] ' + varTipoDato)
			   WHEN @P_Opcion IN (2, 4) THEN ('[' + varColumna + '] ')
			   WHEN @P_Opcion = 3 THEN varValor
			END
	FROM agr.CONFIG_COL_ESTABLECIMIENTO
	WHERE sntIdEstablecimiento = @V_IdEstablecimiento AND
		  intIdConNivEstable IS NULL
	ORDER BY tnyOrden
	
	SET @V_Col = (SELECT STRING_AGG(String, ', ') FROM @tbl_Ordeado)

	SET @V_SQL = @V_SQL + @V_Col + ','

	DELETE @tbl_Ordeado

	SET @V_Col = ''
	---------
	
	SET @V_Lim = (SELECT MAX(tnyNivel) FROM agr.CONFIG_NIVEL_ESTABLECIMIENTO WHERE sntIdEstablecimiento = @V_IdEstablecimiento)

	WHILE @V_Cont <= @V_Lim
	BEGIN

		SELECT @V_Col = Descrip,
			   @V_IdNivel = intIdConNivEstable
		FROM agr.CONFIG_NIVEL_ESTABLECIMIENTO 
		WHERE sntIdEstablecimiento = @V_IdEstablecimiento AND 
			  tnyNivel = @V_Cont

		 INSERT INTO @tbl_Ordeado (String)
		 SELECT CASE 
					 WHEN @P_Opcion = 1 THEN ('['+ @V_Col + varColumna + '] ' + varTipoDato)
					 WHEN @P_Opcion IN (2, 4) THEN ('['+ @V_Col + varColumna + '] ')
					 WHEN @P_Opcion = 3 THEN (varValor)
				END
		 FROM agr.CONFIG_COL_ESTABLECIMIENTO
		 WHERE sntIdEstablecimiento = @V_IdEstablecimiento AND
			   intIdConNivEstable = @V_IdNivel
		 ORDER BY intIdConNivEstable

		 SELECT @V_Col = STRING_AGG(String,', ')
		 FROM @tbl_Ordeado

		 SET @V_SQL = @V_SQL + @V_Col + ','

		 DELETE @tbl_Ordeado

		SET @V_Cont += 1
	END

	---------
	
	SET @V_SQL = LEFT(@V_SQL, LEN(@V_SQL) - 1)

	SET @V_SQL = @V_SQL + ' '

	SET @V_SQL = @V_SQL + CASE
							WHEN @P_Opcion IN (1,2) THEN ')'
							WHEN @P_Opcion = 3 THEN 'FROM agr.REFERENCIA AS REF 
								   INNER JOIN agr.ESTABLECIMIENTO AS EST ON REF.sntIdEstablecimiento = EST.sntIdEstablecimiento
								   WHERE numIdReferencia = ' + CONVERT(VARCHAR(18),@P_IdReferencia)
							WHEN @P_Opcion = 4 THEN 'FROM #Formato FOR JSON PATH,INCLUDE_NULL_VALUES, WITHOUT_ARRAY_WRAPPER) 
													 SELECT @V_Json'
						  END

	RETURN @V_SQL

 END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="3" />
							<Property Name="Length" Value="2962" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="&#xD;&#xA; CREATE FUNCTION agr.fnGeneraJson&#xD;&#xA; (@P_IdReferencia numeric(15),&#xD;&#xA;  @P_Opcion TINYINT)&#xD;&#xA;  RETURNS NVARCHAR(MAX)&#xD;&#xA; AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[agr].[fnGeneraJson].[@P_IdReferencia]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="15" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[agr].[fnGeneraJson].[@P_Opcion]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="IsMax" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[nvarchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[agr].[LVAL]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[LVAL].[numIdLval]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="3" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[LVAL].[varDescrip]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="60" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[LVAL].[varValor]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="60" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[LVAL].[varMensaje]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="130" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="38" />
		</Element>
		<Element Type="SqlTable" Name="[agr].[MONEDA]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[MONEDA].[chrIdMoneda]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="3" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[MONEDA].[varDescrip]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="26" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="39" />
		</Element>
		<Element Type="SqlTable" Name="[agr].[NIVEL]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[NIVEL].[tnyIdNivel]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[NIVEL].[varDescrip]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="36" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="40" />
		</Element>
		<Element Type="SqlTable" Name="[agr].[ORIGEN]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[ORIGEN].[tnyIdOrigen]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[ORIGEN].[varDescrip]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="41" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[agr].[PK_chrIdMoneda_MON]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[MONEDA].[chrIdMoneda]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[MONEDA]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="39" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[agr].[PK_IdCliente_CLI]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[CLIENTE].[sntIdCliente]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[CLIENTE]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="9" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[agr].[PK_IdConfiguracion_CON]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[CONFIGURACION].[sntIdConfiguracion]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[CONFIGURACION]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="18" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[agr].[PK_IdLval_LVA]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[LVAL].[numIdLval]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[LVAL]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="38" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[agr].[PK_IdRegistro_COC]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[CONFIG_CLIENTE].[intIdRegistro]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[CONFIG_CLIENTE]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="10" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[agr].[PK_IdValidacion_VAL]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[VALIDACION].[numIdValidacion]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[VALIDACION]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="42" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[agr].[PK_intIdConColEstable_CCE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO].[intIdConColEstable]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[CONFIG_COL_ESTABLECIMIENTO]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="13" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[agr].[PK_intIdProcessControl_PRO]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[PROCESSCONTROL].[intIdProcessControl]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[PROCESSCONTROL]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="43" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[agr].[PK_intIdProcessError_PRE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[PROCESSERROR].[intIdProcessError]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[PROCESSERROR]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="44" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[agr].[PK_intIdRegistro_CNE]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO].[intIdConNivEstable]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[CONFIG_NIVEL_ESTABLECIMIENTO]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="16" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[agr].[PK_numIdConfValidacion_CVA]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[CONFVALIDACIONES].[numIdConfValidacion]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[CONFVALIDACIONES]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="20" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[agr].[PK_numIdReferencia_REF]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[REFERENCIA].[numIdReferencia]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="45" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[agr].[PK_sntIdEstablecimiento_EST]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[ESTABLECIMIENTO].[sntIdEstablecimiento]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[ESTABLECIMIENTO]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="27" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[agr].[PK_tnyIdEstatus_EST]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[ESTATUS].[tnyIdEstatus]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[ESTATUS]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="28" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[agr].[PK_tnyIdNivel_NIV]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[NIVEL].[tnyIdNivel]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[NIVEL]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="40" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[agr].[PK_tnyIdOrigen_ORI]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[ORIGEN].[tnyIdOrigen]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[ORIGEN]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="41" />
		</Element>
		<Element Type="SqlTable" Name="[agr].[PROCESSCONTROL]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[PROCESSCONTROL].[intIdProcessControl]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="15" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[PROCESSCONTROL].[nvarJSON]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[PROCESSCONTROL].[tnyIdOrigen]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[PROCESSCONTROL].[sdtFecRegistro]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="26" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="43" />
			<AttachedAnnotation Disambiguator="36" />
		</Element>
		<Element Type="SqlTable" Name="[agr].[PROCESSERROR]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[PROCESSERROR].[intIdProcessError]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[PROCESSERROR].[intIdProcessControl]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="15" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[PROCESSERROR].[numIdValidacion]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="3" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[PROCESSERROR].[varMensaje]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="120" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[PROCESSERROR].[chrCodError]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[PROCESSERROR].[FecRegistro]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="24" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="44" />
			<AttachedAnnotation Disambiguator="30" />
			<AttachedAnnotation Disambiguator="32" />
		</Element>
		<Element Type="SqlTable" Name="[agr].[REFERENCIA]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[REFERENCIA].[numIdReferencia]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="15" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[REFERENCIA].[numDifReferencia]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[REFERENCIA].[intIdProcessControl]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="15" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[REFERENCIA].[numNoTransaccion]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[REFERENCIA].[chrIdMoneda]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="3" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[REFERENCIA].[sntIdEstablecimiento]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[REFERENCIA].[sntIdCliente]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[REFERENCIA].[varNoBeneficiario]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="26" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[REFERENCIA].[decMonto]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[REFERENCIA].[numNoReferencia]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[REFERENCIA].[sdtFecExpiracion]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[REFERENCIA].[sdtFecRegistro]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="25" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[REFERENCIA].[varURLQR]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="140" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[REFERENCIA].[varJSON]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="600" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[REFERENCIA].[tnyIdEstatus]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="45" />
			<AttachedAnnotation Disambiguator="29" />
			<AttachedAnnotation Disambiguator="31" />
			<AttachedAnnotation Disambiguator="33" />
			<AttachedAnnotation Disambiguator="34" />
			<AttachedAnnotation Disambiguator="35" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="46" />
		</Element>
		<Element Type="SqlIndex" Name="[agr].[REFERENCIA].[IX_NC_COMB_X1]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[REFERENCIA].[tnyIdEstatus]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[REFERENCIA].[sdtFecExpiracion]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[agr].[REFERENCIA].[numIdReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[intIdProcessControl]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numNoTransaccion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[chrIdMoneda]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[varNoBeneficiario]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[decMonto]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numNoReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sdtFecRegistro]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[varURLQR]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[varJSON]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sntIdEstablecimiento]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sntIdCliente]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[agr].[REFERENCIA].[IX_NC_numDifReferencia_X4]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[REFERENCIA].[numDifReferencia]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[agr].[REFERENCIA].[numIdReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[intIdProcessControl]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numNoTransaccion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[chrIdMoneda]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sntIdEstablecimiento]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[varURLQR]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[varJSON]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[tnyIdEstatus]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sntIdCliente]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[varNoBeneficiario]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[decMonto]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numNoReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sdtFecExpiracion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sdtFecRegistro]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[agr].[REFERENCIA].[IX_NC_numNoReferencia_X3]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[REFERENCIA].[numNoReferencia]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[agr].[REFERENCIA].[numIdReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[intIdProcessControl]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numNoTransaccion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[chrIdMoneda]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sntIdEstablecimiento]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sdtFecRegistro]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[varURLQR]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[varJSON]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[tnyIdEstatus]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sntIdCliente]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[varNoBeneficiario]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[decMonto]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sdtFecExpiracion]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[agr].[REFERENCIA].[IX_NC_sntIdEstablecimiento_X2]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[REFERENCIA].[sntIdEstablecimiento]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[agr].[REFERENCIA].[numIdReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[intIdProcessControl]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numNoTransaccion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[chrIdMoneda]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sntIdCliente]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numNoReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sdtFecExpiracion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sdtFecRegistro]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[varURLQR]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[varJSON]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[tnyIdEstatus]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[varNoBeneficiario]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[decMonto]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[agr].[spActualizaFormatoJson]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
BEGIN
	SET NOCOUNT ON

	DECLARE @tbl_Resul AS TABLE (IdRegistro INT PRIMARY KEY IDENTITY(1,1), FormatoJSON NVARCHAR(MAX))
	DECLARE @V_ScriptSQL NVARCHAR(MAX) = ''

	SET @V_ScriptSQL = agr.fnGeneraJson (@P_IdReferencia,1)
	SET @V_ScriptSQL = @V_ScriptSQL + agr.fnGeneraJson (@P_IdReferencia,2)
	SET @V_ScriptSQL = @V_ScriptSQL + agr.fnGeneraJson (@P_IdReferencia,3)
	SET @V_ScriptSQL = @V_ScriptSQL + agr.fnGeneraJson (@P_IdReferencia,4)

	INSERT INTO @tbl_Resul (FormatoJSON)
	EXEC SP_EXECUTESQL @V_ScriptSQL

	UPDATE agr.REFERENCIA SET varJSON = (SELECT FormatoJSON FROM @tbl_Resul)
	WHERE numIdReferencia = @P_IdReferencia

	SET NOCOUNT OFF
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnGeneraJson]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spActualizaFormatoJson].[@P_IdReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spActualizaFormatoJson].[@tbl_Resul].[FormatoJSON]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[varJSON]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spActualizaFormatoJson].[@tbl_Resul].[FormatoJSON]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numIdReferencia]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[agr].[spActualizaFormatoJson].[@tbl_Resul]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[spActualizaFormatoJson].[@tbl_Resul].[IdRegistro]">
									<Property Name="IsNullable" Value="False" />
									<Property Name="IsIdentity" Value="True" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[spActualizaFormatoJson].[@tbl_Resul].[FormatoJSON]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[agr].[spActualizaFormatoJson].[@P_IdReferencia]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="15" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="741" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROC agr.spActualizaFormatoJson&#xD;&#xA;(@P_IdReferencia NUMERIC(15))&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[agr].[spConsulReferencia]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
BEGIN
	SET NOCOUNT ON
	
	DECLARE @V_IdRegistro INT, 
			@V_Sucess BIT = 0,
			@V_ReferenceId NUMERIC(15)

	--EXPIRACIN DE REFERENCIA
	EXEC agr.spExpiraReferencia
	
	INSERT INTO agr.PROCESSCONTROL (nvarJSON, tnyIdOrigen)
							VALUES (@P_json, 4)

	SET @V_IdRegistro = SCOPE_IDENTITY()

	--VALIDACIONES GENERALES
	EXEC agr.spValGenerales @P_Accion = 7,
							@P_IdRegistro = @V_IdRegistro

	IF NOT EXISTS (SELECT TOP 1 1 FROM agr.PROCESSERROR WHERE intIdProcessControl = @V_IdRegistro)
	BEGIN

		--VALIDACIONES GENERALES
		EXEC agr.spValGenerales @P_Accion = 8,
								@P_IdRegistro = @V_IdRegistro
		
			--VALIDACIONES POR CLIENTE
		IF NOT EXISTS (SELECT TOP 1 1 FROM agr.PROCESSERROR WITH(NOLOCK) WHERE intIdProcessControl = @V_IdRegistro)
		BEGIN

			SET @V_Sucess = 1

		END

	END

	IF @V_Sucess = 1 
	BEGIN
		
		SET @V_ReferenceId = (SELECT REF.numIdReferencia 
							  FROM agr.fnFormatoJsonConsulta(@V_IdRegistro) AS JSO
								INNER JOIN agr.REFERENCIA AS REF ON JSO.IdReferencia = REF.numDifReferencia)

		EXEC agr.spActualizaFormatoJson @P_IdReferencia = @V_ReferenceId

		SELECT varJSON
		FROM agr.REFERENCIA
		WHERE numIdReferencia = @V_ReferenceId

	END
	ELSE
	BEGIN
			
		--GENERAR JSON DE ERROR
		EXEC agr.spEnviaErrorJson @P_IdRegistro = @V_IdRegistro

	END

	SET NOCOUNT OFF
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[numeric]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spExpiraReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSCONTROL]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSCONTROL].[nvarJSON]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSCONTROL].[tnyIdOrigen]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spConsulReferencia].[@P_json]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spValGenerales]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spValGenerales].[@P_Accion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spValGenerales].[@P_IdRegistro]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSERROR]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSERROR].[intIdProcessControl]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJsonConsulta]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJsonConsulta].[IdReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numDifReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numIdReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spActualizaFormatoJson]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spActualizaFormatoJson].[@P_IdReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[varJSON]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numIdReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spEnviaErrorJson]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spEnviaErrorJson].[@P_IdRegistro]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[agr].[spConsulReferencia].[@P_json]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1430" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROC [agr].[spConsulReferencia]&#xD;&#xA;(@P_json NVARCHAR(MAX))&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[agr].[spEnviaErrorJson]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
BEGIN
	SET NOCOUNT ON
	
	DECLARE @tbl_Retorno AS TABLE (Success VARCHAR(10), Code CHAR(2), [Message]	VARCHAR(120))

	INSERT INTO @tbl_Retorno (Success, Code, [Message])
	SELECT TOP 1 'False',
		   chrCodError,
		   varMensaje
	FROM agr.PROCESSERROR
	WHERE intIdProcessControl = @P_IdRegistro
	ORDER BY intIdProcessError ASC

	SELECT *
	FROM @tbl_Retorno
	FOR JSON PATH,INCLUDE_NULL_VALUES, WITHOUT_ARRAY_WRAPPER

	SET NOCOUNT OFF
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[agr].[spEnviaErrorJson].[@tbl_Retorno].[Success]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spEnviaErrorJson].[@tbl_Retorno].[Code]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spEnviaErrorJson].[@tbl_Retorno].[Message]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSERROR]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSERROR].[chrCodError]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSERROR].[varMensaje]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSERROR].[intIdProcessControl]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spEnviaErrorJson].[@P_IdRegistro]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSERROR].[intIdProcessError]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[agr].[spEnviaErrorJson].[@tbl_Retorno]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[spEnviaErrorJson].[@tbl_Retorno].[Success]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="10" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[spEnviaErrorJson].[@tbl_Retorno].[Code]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="2" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[spEnviaErrorJson].[@tbl_Retorno].[Message]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="120" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[agr].[spEnviaErrorJson].[@P_IdRegistro]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="512" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROC agr.spEnviaErrorJson&#xD;&#xA;(@P_IdRegistro INT)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[agr].[spExpiraReferencia]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
BEGIN
	SET NOCOUNT ON

	DECLARE @tbl_Referencia AS TABLE (IdRegistro INT PRIMARY KEY IDENTITY(1,1), IdReferencia NUMERIC(15))
	DECLARE @V_IdReferencia NUMERIC(15),
		@V_Cont INT = 1,
		@V_Lim INT

	INSERT INTO @tbl_Referencia (IdReferencia)
	SELECT numIdReferencia
	FROM agr.REFERENCIA WITH(NOLOCK)
	WHERE tnyIdEstatus = 1 AND
		  sdtFecExpiracion < CONVERT(SMALLDATETIME,GETDATE())

	IF (SELECT COUNT(*) FROM @tbl_Referencia) > 0 
	BEGIN

		UPDATE REF SET REF.tnyIdEstatus = 2
		FROM agr.REFERENCIA AS REF WITH(NOLOCK)
			INNER JOIN @tbl_Referencia AS TRE ON REF.numIdReferencia = TRE.IdReferencia

		SET @V_Lim = (SELECT COUNT(*) FROM @tbl_Referencia)

		WHILE @V_Cont <= @V_Lim
		BEGIN
		
			SET @V_IdReferencia = (SELECT IdReferencia FROM @tbl_Referencia WHERE IdRegistro = @V_Cont)

			EXEC agr.spActualizaFormatoJson @P_IdReferencia = @V_IdReferencia

			SET @V_Cont+= 1
		END

	END

	SET NOCOUNT OFF
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[numeric]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spExpiraReferencia].[@tbl_Referencia].[IdReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numIdReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[tnyIdEstatus]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sdtFecExpiracion]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numIdReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spExpiraReferencia].[@tbl_Referencia].[IdReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[tnyIdEstatus]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spExpiraReferencia].[@tbl_Referencia].[IdReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spExpiraReferencia].[@tbl_Referencia].[IdRegistro]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spActualizaFormatoJson]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spActualizaFormatoJson].[@P_IdReferencia]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[agr].[spExpiraReferencia].[@tbl_Referencia]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[spExpiraReferencia].[@tbl_Referencia].[IdRegistro]">
									<Property Name="IsNullable" Value="False" />
									<Property Name="IsIdentity" Value="True" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[spExpiraReferencia].[@tbl_Referencia].[IdReferencia]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="15" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[numeric]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="988" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROC agr.spExpiraReferencia&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[agr].[spGeneraReferencia]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
 BEGIN
	SET NOCOUNT ON
	
	DECLARE @V_NoReferencia NUMERIC(16),
			@V_FolioReferencia VARCHAR(8)

	--CONSULTAR EL FOLIO EN EL QUE VA
	SET @V_FolioReferencia = (SELECT varValor FROM [agr].[LVAL] WHERE numIdLval = 6)

	SELECT @V_NoReferencia = CONCAT(EST.intNoSocio,@V_FolioReferencia, FORMAT(CONVERT(INT,LEFT(REPLACE(CONVERT(VARCHAR(12), JSO.Amount),'.',''),LEN(REPLACE(CONVERT(VARCHAR(12), JSO.Amount),'.','')) - 1)),'00000'))
	FROM agr.fnFormatoJson (@P_IdRegistro) AS JSO
		INNER JOIN agr.ESTABLECIMIENTO AS EST ON JSO.EstablecimientoId = EST.sntIdEstablecimiento

	SET @V_NoReferencia = CONCAT(@V_NoReferencia, agr.fnCodValidacion(@V_NoReferencia))
	
	SET @P_NoReferencia = @V_NoReferencia

	SET @V_FolioReferencia = FORMAT(IIF((@V_FolioReferencia + 1) > 9999999, 1, (@V_FolioReferencia + 1)) ,'0000000')
	
	--ACTUALIZAR FOLIO RANDOM
	UPDATE agr.LVAL SET varValor = @V_FolioReferencia 
	WHERE numIdLval = 6

	SET NOCOUNT OFF
 END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[numeric]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[agr].[LVAL]" />
				</Entry>
				<Entry>
					<References Name="[agr].[LVAL].[varValor]" />
				</Entry>
				<Entry>
					<References Name="[agr].[LVAL].[numIdLval]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spGeneraReferencia].[@P_IdRegistro]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson]" />
				</Entry>
				<Entry>
					<References Name="[agr].[ESTABLECIMIENTO]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson].[EstablecimientoId]" />
				</Entry>
				<Entry>
					<References Name="[agr].[ESTABLECIMIENTO].[sntIdEstablecimiento]" />
				</Entry>
				<Entry>
					<References Name="[agr].[ESTABLECIMIENTO].[intNoSocio]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson].[Amount]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnCodValidacion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spGeneraReferencia].[@P_NoReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[LVAL].[varValor]" />
				</Entry>
				<Entry>
					<References Name="[agr].[LVAL].[numIdLval]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[agr].[spGeneraReferencia].[@P_IdRegistro]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[agr].[spGeneraReferencia].[@P_NoReferencia]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1057" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROC agr.spGeneraReferencia&#xD;&#xA;(@P_IdRegistro INT,&#xD;&#xA; @P_NoReferencia NUMERIC(16) OUTPUT)&#xD;&#xA; AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[agr].[spGetValidaciones]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
BEGIN
	SET NOCOUNT ON
	
	DECLARE @V_IdCliente SMALLINT,
			@V_ScriptSQL Nvarchar(MAX)

	IF @P_Accion IN (1,2)
	BEGIN

		--1	Validaciones Generales Agregador
		--2	Validaciones Por Cliente Agregador

		SET @V_IdCliente = (SELECT CLI.sntIdCliente 
							FROM agr.fnFormatoJson (@P_IdRegistro) AS JSO 
								INNER JOIN agr.CLIENTE AS CLI ON JSO.GUIDClient = CLI.varGUIDCliente)


		SET @V_ScriptSQL = 'SELECT CON.numIdValidacion,
								   CON.varScriptSQL,
								   VAL.chrCodError
							FROM agr.CONFVALIDACIONES AS CON
								INNER JOIN agr.VALIDACION AS VAL ON CON.numIdValidacion = VAL.numIdValidacion
							WHERE tnyIdNivel = ' + CONVERT(VARCHAR(5),@P_Accion) + 'AND ' + 
							CASE 
								 WHEN @P_Accion = 2 THEN 'CON.sntIdCliente = ' + CONVERT(VARCHAR(5),@V_IdCliente) + ' AND '
								 WHEN @P_Accion = 1 THEN ''
							END + 
							' bitIsActivo = 1'

		EXEC SP_EXECUTESQL @V_ScriptSQL

	END

	ELSE IF @P_Accion IN (3, 4)
	BEGIN
		--3	Validaciones Generales Cobro
		--4	Validaciones Por Cliente Cobro

		SET @V_IdCliente = (SELECT REF.sntIdCliente 
							FROM swt.fnFormatoJsonCargo(@P_IdRegistro) AS JSO
								 INNER JOIN agr.REFERENCIA AS REF ON REF.numNoReferencia = JSO.Referencia AND 
																	 REF.tnyIdEstatus = 1)

		SET @V_ScriptSQL = 'SELECT CON.numIdValidacion,
								   CON.varScriptSQL,
								   VAL.chrCodError
							FROM agr.CONFVALIDACIONES AS CON
								INNER JOIN agr.VALIDACION AS VAL ON CON.numIdValidacion = VAL.numIdValidacion
							WHERE tnyIdNivel = ' + CONVERT(VARCHAR(5),@P_Accion) + 'AND ' +
							CASE
								WHEN @P_Accion = 4 THEN 'CON.sntIdCliente = ' + CONVERT(VARCHAR(5),@V_IdCliente) + ' AND '
								WHEN @P_Accion = 3 THEN ''
							END + 
							' bitIsActivo = 1'

		EXEC SP_EXECUTESQL @V_ScriptSQL
		
	END

	--ELSE IF @P_Accion IN (5,6)
	--BEGIN
		--5	Validaciones Generales Reversa
		--6	Validaciones Por Cliente Reversa
	--END

	ELSE IF @P_Accion IN (7, 8)
	BEGIN
		--7	Validaciones Generales Consulta
		--8	Validaciones Por Cliente Consulta
		
		SET @V_IdCliente = (SELECT REF.sntIdCliente 
							FROM [agr].[fnFormatoJsonConsulta] (@P_IdRegistro) AS JSO 
								INNER JOIN agr.REFERENCIA AS REF ON JSO.IdReferencia = REF.numDifReferencia)

		SET @V_ScriptSQL = 'SELECT CON.numIdValidacion,
								   CON.varScriptSQL,
								   VAL.chrCodError
							FROM agr.CONFVALIDACIONES AS CON
								INNER JOIN agr.VALIDACION AS VAL ON CON.numIdValidacion = VAL.numIdValidacion
							WHERE tnyIdNivel = ' + CONVERT(VARCHAR(5),@P_Accion) + 'AND ' +
							CASE
								WHEN @P_Accion = 8 THEN 'CON.sntIdCliente = ' + CONVERT(VARCHAR(5),@V_IdCliente) + ' AND '
								WHEN @P_Accion = 7 THEN ''
							END + 
							' bitIsActivo = 1'

		EXEC SP_EXECUTESQL @V_ScriptSQL

	END

	SET NOCOUNT OFF
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[smallint]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spGetValidaciones].[@P_Accion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spGetValidaciones].[@P_IdRegistro]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CLIENTE]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson].[GUIDClient]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CLIENTE].[varGUIDCliente]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CLIENTE].[sntIdCliente]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numNoReferencia]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[Referencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[tnyIdEstatus]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sntIdCliente]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJsonConsulta]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJsonConsulta].[IdReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numDifReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sntIdCliente]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[agr].[spGetValidaciones].[@P_Accion]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[agr].[spGetValidaciones].[@P_IdRegistro]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2954" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROC [agr].[spGetValidaciones]&#xD;&#xA;(@P_Accion INT,&#xD;&#xA; @P_IdRegistro INT)&#xD;&#xA; AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[agr].[spInsertReferencia]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
BEGIN
	SET NOCOUNT ON

	DECLARE @V_NoReferencia NUMERIC(16),
			@V_IdReferencia	NUMERIC(15),
			@V_ScriptSQL NVARCHAR(MAX),
			@V_IdEstablecimiento SMALLINT
	 
	EXEC [agr].[spGeneraReferencia] @P_IdRegistro = @P_IdRegistro, 
									@P_NoReferencia = @V_NoReferencia OUTPUT

	SET @V_IdEstablecimiento = (SELECT EstablecimientoId FROM agr.fnFormatoJson (@P_IdRegistro))

	 INSERT INTO agr.REFERENCIA (intIdProcessControl, numDifReferencia, numNoTransaccion, chrIdMoneda, sntIdEstablecimiento, sntIdCliente, varNoBeneficiario, decMonto, numNoReferencia, sdtFecExpiracion, sdtFecRegistro, varURLQR, varJSON, tnyIdEstatus)
	 SELECT @P_IdRegistro,
			agr.fnGeneraDifReferencia(RAND()),
			JSO.TransactionId,
			JSO.CurrencyCode,
			JSO.EstablecimientoId,
			CLI.sntIdCliente,
			JSO.BeneficiaryId,
			JSO.Amount,
			@V_NoReferencia AS numNoReferencia,
			CASE
				WHEN JSO.ExpiryDate IS NULL THEN DATEADD(HOUR,CONVERT(INT,CCL.varValor),GETDATE())
				ELSE JSO.ExpiryDate
			END,
			GETDATE(),
			NULL AS [URL],
			NULL AS [JSON],
			1 AS IdEstatus
	 FROM agr.fnFormatoJson (@P_IdRegistro) AS JSO
		INNER JOIN agr.CLIENTE AS CLI ON JSO.GUIDClient = CLI.varGUIDCliente
		LEFT JOIN (SELECT sntIdCliente,
						  varValor
				   FROM [agr].[CONFIG_CLIENTE]
				   WHERE sntIdConfiguracion = 3) AS CCL ON CLI.sntIdCliente = CCL.sntIdCliente
		
	 SET @V_IdReferencia = SCOPE_IDENTITY()
	 
	 --ACTUALIZA EL FORMATO JSON QUE SE GUARDA EN LA TABLA
	 EXEC [agr].[spActualizaFormatoJson] @P_IdReferencia = @V_IdReferencia

	SELECT varJSON
	FROM agr.REFERENCIA
	WHERE numIdReferencia = @V_IdReferencia

	SET NOCOUNT OFF
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[numeric]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[numeric]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[smallint]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spGeneraReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spGeneraReferencia].[@P_IdRegistro]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spInsertReferencia].[@P_IdRegistro]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spGeneraReferencia].[@P_NoReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson].[EstablecimientoId]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[intIdProcessControl]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numDifReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numNoTransaccion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[chrIdMoneda]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sntIdEstablecimiento]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sntIdCliente]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[varNoBeneficiario]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[decMonto]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numNoReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sdtFecExpiracion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sdtFecRegistro]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[varURLQR]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[varJSON]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[tnyIdEstatus]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CLIENTE]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson].[GUIDClient]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CLIENTE].[varGUIDCliente]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_CLIENTE]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_CLIENTE].[sntIdCliente]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_CLIENTE].[varValor]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_CLIENTE].[sntIdConfiguracion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CLIENTE].[sntIdCliente]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_CLIENTE].[sntIdCliente]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnGeneraDifReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson].[TransactionId]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson].[CurrencyCode]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson].[EstablecimientoId]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson].[BeneficiaryId]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson].[Amount]" />
				</Entry>
				<Entry>
					<References Name="[agr].[fnFormatoJson].[ExpiryDate]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CONFIG_CLIENTE].[varValor]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spActualizaFormatoJson]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spActualizaFormatoJson].[@P_IdReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numIdReferencia]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[agr].[spInsertReferencia].[@P_IdRegistro]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1722" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROC [agr].[spInsertReferencia]&#xD;&#xA;(@P_IdRegistro INT)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[agr].[spObtenerDatosAPIClient]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
BEGIN
	SET NOCOUNT ON

	DECLARE @NoReferencia NUMERIC(16)

	SET @NoReferencia = (SELECT Referencia FROM swt.fnFormatoJsonCargo(@IdProcessControl))


	SELECT CLI.URLAPI, 
		   'Token' AS EPToken,
		   'api/OXXO/Auth/Success' AS EPAutoriza,
		   CLI.UserAPI,
		   CLI.PassAPI
	FROM agr.CLIENTE AS CLI
		INNER JOIN agr.REFERENCIA AS REF ON CLI.sntIdCliente = REF.sntIdCliente
	WHERE REF.numNoReferencia = @NoReferencia


	SET NOCOUNT OFF
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[numeric]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spObtenerDatosAPIClient].[@IdProcessControl]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[Referencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CLIENTE]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CLIENTE].[sntIdCliente]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[sntIdCliente]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CLIENTE].[URLAPI]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CLIENTE].[UserAPI]" />
				</Entry>
				<Entry>
					<References Name="[agr].[CLIENTE].[PassAPI]" />
				</Entry>
				<Entry>
					<References Name="[agr].[REFERENCIA].[numNoReferencia]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[agr].[spObtenerDatosAPIClient].[@IdProcessControl]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="15" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="539" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROC [agr].[spObtenerDatosAPIClient]&#xD;&#xA;(@IdProcessControl NUMERIC(15))&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[agr].[spObtenerReferencia]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
 BEGIN

	SET NOCOUNT ON

	DECLARE @V_IdRegistro INT, 
			@V_Sucess BIT = 0

	INSERT INTO agr.PROCESSCONTROL (nvarJSON, tnyIdOrigen)
							VALUES (@P_json, 1)

	SET @V_IdRegistro = SCOPE_IDENTITY()

	--VALIDACIONES GENERALES
	EXEC agr.spValGenerales @P_Accion = 1,
							@P_IdRegistro = @V_IdRegistro

	IF NOT EXISTS (SELECT TOP 1 1 FROM agr.PROCESSERROR WITH(NOLOCK) WHERE intIdProcessControl = @V_IdRegistro)
	BEGIN
			
		--VALIDACIONES POR CLIENTE
		EXEC agr.spValGenerales @P_Accion = 2, 
								@P_IdRegistro = @V_IdRegistro

		--VALIDACIONES POR CLIENTE
		IF NOT EXISTS (SELECT TOP 1 1 FROM agr.PROCESSERROR WITH(NOLOCK) WHERE intIdProcessControl = @V_IdRegistro)
		BEGIN
			
			SET @V_Sucess = 1

		END
		
	END

	IF @V_Sucess = 1 
	BEGIN

		--GENERACIN DE REFERENCIA
		EXEC agr.spInsertReferencia @P_IdRegistro = @V_IdRegistro

	END
	ELSE
	BEGIN
			
		--GENERAR JSON DE ERROR
		EXEC agr.spEnviaErrorJson @P_IdRegistro  = @V_IdRegistro
	END

	SET NOCOUNT OFF
 END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSCONTROL]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSCONTROL].[nvarJSON]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSCONTROL].[tnyIdOrigen]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spObtenerReferencia].[@P_json]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spValGenerales]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spValGenerales].[@P_Accion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spValGenerales].[@P_IdRegistro]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSERROR]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSERROR].[intIdProcessControl]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spInsertReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spInsertReferencia].[@P_IdRegistro]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spEnviaErrorJson]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spEnviaErrorJson].[@P_IdRegistro]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[agr].[spObtenerReferencia].[@P_json]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1088" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROC agr.spObtenerReferencia&#xD;&#xA;(@P_json NVARCHAR(MAX))&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[agr].[spValGenerales]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
 BEGIN
	SET NOCOUNT ON
	
	--EN EL PARAMETRO @P_Accion SOLAMENTE SE PUEDE RECIBIR 1 Y 2
	DECLARE @tbl_Validaciones AS TABLE (IdRegistro INT PRIMARY KEY IDENTITY (1,1), NumValidacion INT, ScriptSQL varchar(MAX), CodError CHAR(2))
	DECLARE	@tbl_RESVALI AS TABLE (Mensaje VARCHAR(280) INDEX IX_NC_X1 NONCLUSTERED (Mensaje))
	DECLARE	@tbl_RESULTADO AS TABLE (IdRegistro INT PRIMARY KEY IDENTITY(1,1), NumValidacion INT, Mensaje VARCHAR(280), CodError CHAR(2))
	DECLARE @V_Cont INT = 1,
			@V_Limite INT,
			@V_NumValidacion INT,
			@V_ScriptSQL Nvarchar(MAX),
			@V_CodError CHAR(2)

	--EXTRACCIN DE VALIDACIONES
	INSERT INTO @tbl_Validaciones (NumValidacion, ScriptSQL, CodError)
	EXEC [agr].spGetValidaciones @P_Accion = @P_Accion,
								 @P_IdRegistro = @P_IdRegistro

	-- EJECUCIN DE VALIDACION POR NIVEL Y CLIENTE
	SET @V_Limite = (SELECT COUNT(*) FROM @tbl_Validaciones)

	WHILE @V_Cont <= (@V_Limite)
	BEGIN
		
		SELECT @V_NumValidacion = NumValidacion,
			   @V_ScriptSQL = ScriptSQL,
			   @V_CodError = CodError
		FROM @tbl_Validaciones 
		WHERE IdRegistro = @V_Cont

		INSERT INTO @tbl_RESVALI (Mensaje)
		EXEC SP_EXECUTESQL @statement = @V_ScriptSQL,
						   @params = N'@IdRegistro INT',
						   @IdRegistro = @P_IdRegistro

		INSERT INTO @tbl_RESULTADO (NumValidacion, Mensaje, CodError)
		SELECT @V_NumValidacion,
				Mensaje,
				@V_CodError
		FROM @tbl_RESVALI

		DELETE @tbl_RESVALI

		SET @V_Cont += 1
	END

	INSERT INTO agr.PROCESSERROR (intIdProcessControl, numIdValidacion, varMensaje, chrCodError)
	SELECT @P_IdRegistro,
			NumValidacion,
			Mensaje,
			CodError
	FROM @tbl_RESULTADO

	SET NOCOUNT OFF
 END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spValGenerales].[@tbl_Validaciones].[NumValidacion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spValGenerales].[@tbl_Validaciones].[ScriptSQL]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spValGenerales].[@tbl_Validaciones].[CodError]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spGetValidaciones]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spGetValidaciones].[@P_Accion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spValGenerales].[@P_Accion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spGetValidaciones].[@P_IdRegistro]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spValGenerales].[@P_IdRegistro]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spValGenerales].[@tbl_Validaciones].[IdRegistro]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spValGenerales].[@tbl_RESVALI].[Mensaje]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[agr].[spValGenerales].[@tbl_RESULTADO].[NumValidacion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spValGenerales].[@tbl_RESULTADO].[Mensaje]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spValGenerales].[@tbl_RESULTADO].[CodError]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSERROR]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSERROR].[intIdProcessControl]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSERROR].[numIdValidacion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSERROR].[varMensaje]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSERROR].[chrCodError]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[agr].[spValGenerales].[@tbl_Validaciones]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[spValGenerales].[@tbl_Validaciones].[IdRegistro]">
									<Property Name="IsNullable" Value="False" />
									<Property Name="IsIdentity" Value="True" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[spValGenerales].[@tbl_Validaciones].[NumValidacion]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[spValGenerales].[@tbl_Validaciones].[ScriptSQL]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[spValGenerales].[@tbl_Validaciones].[CodError]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="2" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[agr].[spValGenerales].[@tbl_RESVALI]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[spValGenerales].[@tbl_RESVALI].[Mensaje]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="280" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[agr].[spValGenerales].[@tbl_RESULTADO]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[spValGenerales].[@tbl_RESULTADO].[IdRegistro]">
									<Property Name="IsNullable" Value="False" />
									<Property Name="IsIdentity" Value="True" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[spValGenerales].[@tbl_RESULTADO].[NumValidacion]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[spValGenerales].[@tbl_RESULTADO].[Mensaje]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="280" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[agr].[spValGenerales].[@tbl_RESULTADO].[CodError]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="2" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[agr].[spValGenerales].[@P_Accion]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[agr].[spValGenerales].[@P_IdRegistro]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1763" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROC agr.spValGenerales&#xD;&#xA; (@P_Accion INT,&#xD;&#xA;  @P_IdRegistro INT)&#xD;&#xA; AS" />
			</Annotation>
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[agr].[UQ_numDifReferencia_REF]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[agr].[REFERENCIA].[numDifReferencia]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[agr].[REFERENCIA]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="46" />
		</Element>
		<Element Type="SqlTable" Name="[agr].[VALIDACION]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[VALIDACION].[numIdValidacion]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Property Name="IdentitySeed" Value="100" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="3" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[VALIDACION].[varDescrip]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="60" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[agr].[VALIDACION].[chrCodError]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[agr]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="42" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[__MigrationHistory]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[__MigrationHistory].[MigrationId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="150" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[__MigrationHistory].[ContextKey]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[__MigrationHistory].[Model]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varbinary]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[__MigrationHistory].[ProductVersion]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="47" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[AspNetRoles]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetRoles].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetRoles].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="48" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[AspNetRoles].[RoleNameIndex]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[AspNetRoles].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[AspNetRoles]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[AspNetUserClaims]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUserClaims].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUserClaims].[UserId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUserClaims].[ClaimType]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUserClaims].[ClaimValue]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="49" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="50" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[AspNetUserClaims].[IX_UserId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[AspNetUserClaims].[UserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[AspNetUserClaims]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[AspNetUserLogins]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUserLogins].[LoginProvider]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUserLogins].[ProviderKey]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUserLogins].[UserId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="51" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="52" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[AspNetUserLogins].[IX_UserId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[AspNetUserLogins].[UserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[AspNetUserLogins]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[AspNetUserRoles]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUserRoles].[UserId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUserRoles].[RoleId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="53" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="54" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="55" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[AspNetUserRoles].[IX_RoleId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[AspNetUserRoles].[RoleId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[AspNetUserRoles]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[AspNetUserRoles].[IX_UserId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[AspNetUserRoles].[UserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[AspNetUserRoles]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[AspNetUsers]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUsers].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUsers].[Email]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUsers].[EmailConfirmed]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUsers].[PasswordHash]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUsers].[SecurityStamp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUsers].[PhoneNumber]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUsers].[PhoneNumberConfirmed]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUsers].[TwoFactorEnabled]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUsers].[LockoutEndDateUtc]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUsers].[LockoutEnabled]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUsers].[AccessFailedCount]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[AspNetUsers].[UserName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="56" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[AspNetUsers].[UserNameIndex]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[AspNetUsers].[UserName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[AspNetUsers]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_dbo.AspNetUserClaims_dbo.AspNetUsers_UserId]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[AspNetUserClaims].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[AspNetUserClaims]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[AspNetUsers].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[AspNetUsers]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="50" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_dbo.AspNetUserLogins_dbo.AspNetUsers_UserId]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[AspNetUserLogins].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[AspNetUserLogins]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[AspNetUsers].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[AspNetUsers]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="52" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_dbo.AspNetUserRoles_dbo.AspNetRoles_RoleId]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[AspNetUserRoles].[RoleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[AspNetUserRoles]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[AspNetRoles].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[AspNetRoles]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="54" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_dbo.AspNetUserRoles_dbo.AspNetUsers_UserId]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[AspNetUserRoles].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[AspNetUserRoles]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[AspNetUsers].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[AspNetUsers]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="55" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_dbo.__MigrationHistory]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[__MigrationHistory].[MigrationId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[__MigrationHistory].[ContextKey]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[__MigrationHistory]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="47" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_dbo.AspNetRoles]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[AspNetRoles].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[AspNetRoles]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="48" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_dbo.AspNetUserClaims]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[AspNetUserClaims].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[AspNetUserClaims]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="49" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_dbo.AspNetUserLogins]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[AspNetUserLogins].[LoginProvider]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[AspNetUserLogins].[ProviderKey]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[AspNetUserLogins].[UserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[AspNetUserLogins]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="51" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_dbo.AspNetUserRoles]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[AspNetUserRoles].[UserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[AspNetUserRoles].[RoleId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[AspNetUserRoles]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="53" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_dbo.AspNetUsers]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[AspNetUsers].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[AspNetUsers]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="56" />
		</Element>
		<Element Type="SqlSchema" Name="[swt]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlMultiStatementTableValuedFunction" Name="[swt].[fnFormatoJsonCargo]">
			<Property Name="ReturnTableVariable" Value="@tbl_Json" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSCONTROL]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSCONTROL].[nvarJSON]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSCONTROL].[intIdProcessControl]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[@P_IdRegistro]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[Plaza]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[Tienda]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[FechaCentral]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[fechaAdmin]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[FechaPOS]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[Referencia]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[Monto]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[Caja]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[Operador]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[FolioWm]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[EntryMode]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[Currency]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[tiendaFronteriza]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[att1]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[att3]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[idNegocio]" />
				</Entry>
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo].[stan]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[swt].[fnFormatoJsonCargo].[IdRegistro]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="3" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[swt].[fnFormatoJsonCargo].[Plaza]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[swt].[fnFormatoJsonCargo].[Tienda]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[swt].[fnFormatoJsonCargo].[FechaCentral]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[swt].[fnFormatoJsonCargo].[fechaAdmin]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[swt].[fnFormatoJsonCargo].[FechaPOS]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[swt].[fnFormatoJsonCargo].[Referencia]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[swt].[fnFormatoJsonCargo].[Monto]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[swt].[fnFormatoJsonCargo].[Caja]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[swt].[fnFormatoJsonCargo].[Operador]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[swt].[fnFormatoJsonCargo].[FolioWm]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[swt].[fnFormatoJsonCargo].[EntryMode]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="5" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[swt].[fnFormatoJsonCargo].[Currency]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="5" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[swt].[fnFormatoJsonCargo].[tiendaFronteriza]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="5" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[swt].[fnFormatoJsonCargo].[att1]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[swt].[fnFormatoJsonCargo].[att3]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[swt].[fnFormatoJsonCargo].[idNegocio]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="5" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[swt].[fnFormatoJsonCargo].[stan]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
BEGIN

	DECLARE @json NVARCHAR(MAX)

	SET @json = (SELECT nvarJSON FROM agr.PROCESSCONTROL WITH(NOLOCK) WHERE intIdProcessControl = @P_IdRegistro)
		
	INSERT INTO @tbl_Json (Plaza, Tienda, FechaCentral, fechaAdmin, FechaPOS, Referencia, Monto, Caja, Operador, FolioWm, EntryMode, Currency, tiendaFronteriza, att1, att3, idNegocio, stan)
	SELECT crPlaza,
		   crTienda,
		   CONVERT(SMALLDATETIME, fechaCentral) AS fechaCentral,
		   CONVERT(DATE,fechaAdmin) AS fechaAdmin,
		   CONVERT(SMALLDATETIME, fechaPOS) AS fechaPOS,
		   referencia,
		   monto,
		   caja,
		   operador,
		   folioWm,
		   entryMode,
		   currency,
		   tiendaFronteriza,
		   IIF(att1 = '', NULL, att1) AS att1,
		   IIF(att3 = '', NULL, att3) AS att3,
		   idNegocio,
		   stan
	FROM OPENJSON(@json)
	WITH(crPlaza VARCHAR(10) 'strict $.crPlaza',
		 crTienda VARCHAR(10) 'strict $.crTienda',
		 fechaCentral VARCHAR(20) 'strict $.fechaCentral',
		 fechaAdmin VARCHAR(10) 'strict $.fechaAdmin',
		 fechaPOS VARCHAR(20) 'strict $.fechaPOS',
		 referencia NUMERIC(16) 'strict $.referencia',
		 monto DECIMAL(8,2) 'strict $.monto',
		 caja VARCHAR(2) 'strict $.caja',
		 operador VARCHAR(16) 'strict $.operador',
		 folioWm NUMERIC(10) 'strict $.folioWm',
		 entryMode VARCHAR(5) 'strict $.entryMode',
		 currency VARCHAR(5) 'strict $.currency',
		 tiendaFronteriza VARCHAR(5) 'strict $.tiendaFronteriza',
		 att1 VARCHAR(10) 'strict $.att1',
		 att3 VARCHAR(10) 'strict $.att3',
		 idNegocio VARCHAR(5) 'strict $.idNegocio',
		 stan NUMERIC(10) 'strict $.stan'
		 )

	RETURN 

END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="2" />
							<Property Name="Length" Value="2153" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE FUNCTION swt.fnFormatoJsonCargo&#xD;&#xA;(@P_IdRegistro INT)&#xD;&#xA;RETURNS @tbl_Json TABLE (IdRegistro TINYINT PRIMARY KEY IDENTITY (1,1), Plaza VARCHAR(10), Tienda VARCHAR(10),  FechaCentral SMALLDATETIME, fechaAdmin DATE, FechaPOS SMALLDATETIME, Referencia NUMERIC(16),&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9; Monto DECIMAL(8,2), Caja VARCHAR(2), Operador VARCHAR(16), FolioWm NUMERIC(10), EntryMode VARCHAR(5), Currency VARCHAR(5), tiendaFronteriza VARCHAR(5), att1 VARCHAR(10), att3 VARCHAR(10), &#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9; idNegocio VARCHAR(5), stan NUMERIC(10), INDEX IX_X1 CLUSTERED (Referencia))&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[swt].[fnFormatoJsonCargo].[@P_IdRegistro]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[swt]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineIndexAnnotation" Disambiguator="57" />
		</Element>
		<Element Type="SqlIndex" Name="[swt].[fnFormatoJsonCargo].[IX_X1]">
			<Property Name="IsClustered" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[swt].[fnFormatoJsonCargo].[Referencia]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[swt].[fnFormatoJsonCargo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="57" />
		</Element>
		<Element Type="SqlProcedure" Name="[swt].[spPagoReferencia]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
BEGIN
	SET NOCOUNT ON

		DECLARE @V_IdRegistro INT, 
				@V_Sucess BIT = 0
		
		--EXPIRAR REFERENCIAS
		EXEC [agr].[spExpiraReferencia]


		INSERT INTO agr.PROCESSCONTROL (nvarJSON, tnyIdOrigen)
								VALUES (@P_json, 2)

		SET @V_IdRegistro = SCOPE_IDENTITY()

		--VALIDACIONES POR CLIENTE
		EXEC agr.spValGenerales @P_Accion = 3, 
							    @P_IdRegistro = @V_IdRegistro

		IF NOT EXISTS(SELECT TOP 1 1 FROM agr.PROCESSERROR WHERE intIdProcessControl = @V_IdRegistro)
		BEGIN

			--VALIDACIONES POR CLIENTE
			EXEC agr.spValGenerales @P_Accion = 4,
									  @P_IdRegistro = @V_IdRegistro

			IF NOT EXISTS(SELECT TOP 1 1 FROM agr.PROCESSERROR WHERE intIdProcessControl = @V_IdRegistro)
			BEGIN
				SET @V_Sucess = 1
			END

		END

		IF @V_Sucess = 1 
		BEGIN

			--RETORNO DE EXITO
			SELECT '00' AS chrCodError,
				   'OK' AS varMensaje,
				   @V_IdRegistro AS NoTransaccion

		END
		ELSE 
		BEGIN

			--RETORNO DE ERROR
			SELECT TOP 1 chrCodError,
				   varMensaje,
				   @V_IdRegistro AS NoTransaccion
			FROM [agr].[PROCESSERROR]
			WHERE intIdProcessControl = @V_IdRegistro

		END

	SET NOCOUNT OFF

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spExpiraReferencia]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSCONTROL]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSCONTROL].[nvarJSON]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSCONTROL].[tnyIdOrigen]" />
				</Entry>
				<Entry>
					<References Name="[swt].[spPagoReferencia].[@P_json]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spValGenerales]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spValGenerales].[@P_Accion]" />
				</Entry>
				<Entry>
					<References Name="[agr].[spValGenerales].[@P_IdRegistro]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSERROR]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSERROR].[intIdProcessControl]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSERROR].[chrCodError]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSERROR].[varMensaje]" />
				</Entry>
				<Entry>
					<References Name="[agr].[PROCESSERROR].[intIdProcessControl]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[swt].[spPagoReferencia].[@P_json]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[swt]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1246" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROC [swt].[spPagoReferencia]&#xD;&#xA;(@P_json NVARCHAR(MAX))&#xD;&#xA;AS" />
			</Annotation>
		</Element>
	</Model>
</DataSchemaModel>